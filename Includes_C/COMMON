C Standard COMMON block declarations
C
      INCLUDE 'PARAMS'
C
C RBS contains NNBUF row buffers of length LNBUF bytes, with LNEDGE
C extra real elements at both ends of each buffer to allow for edge
C processing.  The pre-existing row buffer declarations are maintained
C by means of equivalencing.
C
      REAL RBS(1-LNEDGE:LNBUF/LNREAL+LNEDGE,NNBUF)
C
      COMMON /SEMBUF/ RBS
C
      REAL RB1LHS(LNEDGE),RB1(LNBUF/LNREAL),RB1RHS(LNEDGE)
      REAL RB2LHS(LNEDGE),RB2(LNBUF/LNREAL),RB2RHS(LNEDGE)
      REAL RB3LHS(LNEDGE),RB3(LNBUF/LNREAL),RB3RHS(LNEDGE)
      REAL RB4LHS(LNEDGE),RB4(LNBUF/LNREAL),RB4RHS(LNEDGE)
      REAL RB5LHS(LNEDGE),RB5(LNBUF/LNREAL),RB5RHS(LNEDGE)
      REAL RB6LHS(LNEDGE),RB6(LNBUF/LNREAL),RB6RHS(LNEDGE)
C
      EQUIVALENCE (RB1LHS,RBS(1-LNEDGE,1))
      EQUIVALENCE (RB2LHS,RBS(1-LNEDGE,2))
      EQUIVALENCE (RB3LHS,RBS(1-LNEDGE,3))
      EQUIVALENCE (RB4LHS,RBS(1-LNEDGE,4))
      EQUIVALENCE (RB5LHS,RBS(1-LNEDGE,5))
      EQUIVALENCE (RB6LHS,RBS(1-LNEDGE,6))
C
      EQUIVALENCE (RB1,RBS(1,1))
      EQUIVALENCE (RB2,RBS(1,2))
      EQUIVALENCE (RB3,RBS(1,3))
      EQUIVALENCE (RB4,RBS(1,4))
      EQUIVALENCE (RB5,RBS(1,5))
      EQUIVALENCE (RB6,RBS(1,6))
C
      EQUIVALENCE (RB1RHS,RBS(1+LNBUF/LNREAL,1))
      EQUIVALENCE (RB2RHS,RBS(1+LNBUF/LNREAL,2))
      EQUIVALENCE (RB3RHS,RBS(1+LNBUF/LNREAL,3))
      EQUIVALENCE (RB4RHS,RBS(1+LNBUF/LNREAL,4))
      EQUIVALENCE (RB5RHS,RBS(1+LNBUF/LNREAL,5))
      EQUIVALENCE (RB6RHS,RBS(1+LNBUF/LNREAL,6))
C
C SEMTAB holds the command level variable table and
C        information relating to local variables
C
      REAL ROVVS(4),BATCH,DISPLA,SELECT,CFRAME,CLUT,RC,UIF,TRAP
      REAL VMIN,VMAX,VMEAN,VME2,VSD,CD,FS,DOLLAR,VVREST(NVARS-NFIXED)
      REAL LOCVAL(LOCMAX)
C
      INTEGER VNAMES(NVARS),NSEMVE,LOCLEV,LOCVAR(LOCMAX)
      LOGICAL LOCUNS(LOCMAX)
C
      COMMON /SEMTAB/ ROVVS,BATCH,DISPLA,SELECT,CFRAME,CLUT,RC,UIF,TRAP,
     + VMIN,VMAX,VMEAN,VME2,VSD,CD,FS,DOLLAR,VVREST,LOCVAL,
     + VNAMES,NSEMVE,LOCLEV,LOCVAR,LOCUNS
C
C SEMCBS holds info on devices & pictures currently open (reals first,
C then integers*4, then integers)
C
      REAL GSMIN(NLPS),GSMAX(NLPS)
C
      INTEGER*4 FLSIZ(NDVS),CURRB(NDVS),NEXTB(NDVS),ADDR(NLPS)
C
      INTEGER MEDN(NDVS),PROTN(NDVS),FRSIZ(NDVS),DRSIZ(NDVS),CURRF(NDVS)
      INTEGER FRSI2(NDVS),TPSID(NDVS),NEXTF(NDVS),NFRS(NDVS),DVTYP(NDVS)
      INTEGER DVSCR(NDVS),MONSIZ(NDVS),MONSI2(NDVS),GPSIZ(NDVS)
      INTEGER CHSIZ(NDVS),CHSI2(NDVS),DVHAN(NDVS),DVWID(NDVS)
      INTEGER WHEN(NLPS),DEVN(NLPS),PICN(NLPS),WSTAT(NLPS)
      INTEGER NCOLS(NLPS),NROWS(NLPS),NLAYS(NLPS)
      INTEGER CCOLN(NLPS),CROWN(NLPS),CLAYN(NLPS)
      INTEGER CLASSN(NLPS),FORMN(NLPS)
      INTEGER XLEFT(NLPS),LABFG(NLPS),YTOP(NLPS)
      INTEGER FRAME1(NLPS),FRAME2(NLPS),PXSAM(NLPS)
      LOGICAL FILFLG(NDVS,6),OVLIND(NDVS)
      LOGICAL ECHCON(NDVS),ECHDIA(NDVS),ECHLOG(NDVS)
      LOGICAL ECHMON(NDVS),ECHCOM(NDVS),ECHINP(NDVS)
C
      COMMON /SEMCBS/ GSMIN,GSMAX,FLSIZ,NEXTB,ADDR,CURRB,MEDN,PROTN,
     +   DVTYP,DRSIZ,TPSID,DVSCR,FRSIZ,FRSI2,NFRS,MONSIZ,MONSI2,GPSIZ,
     +   CHSIZ,CHSI2,OVLIND,DVHAN,DVWID,FILFLG,CURRF,NEXTF,
     +   WHEN,DEVN,PICN,WSTAT,NCOLS,NROWS,NLAYS,CCOLN,CROWN,CLAYN,
     +   CLASSN,FORMN,XLEFT,YTOP,LABFG,FRAME1,FRAME2,PXSAM
C
      EQUIVALENCE (ECHCON,FILFLG(1,1)),(ECHDIA,FILFLG(2,1))
      EQUIVALENCE (ECHLOG,FILFLG(3,1)),(ECHMON,FILFLG(4,1))
      EQUIVALENCE (ECHCOM,FILFLG(5,1)),(ECHINP,FILFLG(6,1))
C
C SEMFRL holds information relating to the work disc and FOR loops
C
      INTEGER*4 WRKDVS,WRKDPD,WRKLUT,WRKLIN,WRKIND
C
      REAL FOREND(FORMAX),FORSTP(FORMAX)
      INTEGER*4 FORCNT(FORMAX)
      INTEGER FORVAR(FORMAX),FORDEV(FORMAX),FORLIN(FORMAX)
      INTEGER FOROFF(FORMAX),FORSLT(FORMAX),FORFSL(FORMAX)
      INTEGER FORLSL(FORMAX),FORLOC(FORMAX),FORLEV
C
      COMMON /SEMFRL/ WRKDVS,WRKDPD,WRKLUT,WRKLIN,WRKIND,
     + FOREND,FORSTP,FORCNT,FORVAR,FORDEV,FORLIN,FOROFF,FORSLT,
     + FORFSL,FORLSL,FORLOC,FORLEV
C
C SEMPRI holds information relating to Program device input, program
C        text management routines and the data for the TIME command
C
      INTEGER INPDEV(0:INPMAX),INPLIN(0:INPMAX),INPSLT(0:INPMAX)
      INTEGER INPLEN(0:INPMAX),INPNXT(0:INPMAX),INTRAP(0:INPMAX)
      INTEGER INPFOR(0:INPMAX),INPLOC(0:INPMAX),INPLEV,INPUT
      INTEGER PTDEV,PTNUMB,PTPRIO(NDVS)
      INTEGER DTBUFF(7)
C
      COMMON /SEMPRI/ INPDEV,INPLIN,INPSLT,INPLEN,INPNXT,INTRAP,
     + INPFOR,INPLOC,INPLEV,INPUT,PTDEV,PTNUMB,PTPRIO,DTBUFF
C
C SEMPLI holds information relating to buffered program command line
C
      INTEGER*4 LINTXT
      INTEGER LINBUF(LNLINB),LINDEX(LNINDX),LINDEV,LINSLT
      INTEGER LINNUM,LINLEN,LINPTR,COMLIM
      INTEGER OBEYLN(LNLINB),OBEYPT
      LOGICAL OBEYME
C
      COMMON /SEMPLI/ LINTXT,LINBUF,LINDEX,LINDEV,LINSLT,LINNUM,LINLEN,
     +                LINPTR,COMLIM,OBEYLN,OBEYPT,OBEYME
C
C SEMCIP holds information relating to command interpretation
C
      INTEGER*4 I4IDER
C
      INTEGER VRBLEV,VERB
      INTEGER JMPDST,LASTSC,NEXTSC,PREVSC,NPMODU,LP1,LP2,LP3
      INTEGER ERROR,IDERR,IDERR2
      INTEGER CURRWH,BASEWH,OPLPN,BUFROW,BUFLAY,BUFLPN,BUFFRM,PICSEL
C
      LOGICAL NOERCN,REQDCF,REQDTS,REQFSF,REQDRR,LBLINC,SELOPN
      LOGICAL MONIT,MCHANL(NMCHAN)
C
      COMMON /SEMCIP/ I4IDER,VRBLEV,VERB,JMPDST,LASTSC,NEXTSC,PREVSC,
     +  NPMODU,LP1,LP2,LP3,ERROR,IDERR,IDERR2,CURRWH,BASEWH,OPLPN,
     +  BUFROW,BUFLAY,BUFLPN,BUFFRM,PICSEL,NOERCN,REQDCF,
     +  REQDTS,REQFSF,REQDRR,LBLINC,SELOPN,MONIT,MCHANL
C
C SEMARG used for miscellaneous arg passing between modules
C        it also contains dummy variables for ignored results
C
      REAL SMGR1,SMGR2,SMGR3,SMGR4,SMGR5,SMGR6,DUMFP
C
      INTEGER SMGI1,SMGI2,SMGI3,SMGI4,SMGI5
      INTEGER SMGI6,SMGI7,SMGI8,SMGI9,SMGI10,DUMINT
C
      LOGICAL SMGL1,SMGL2,SMGL3,DUMLOG
C
      COMMON /SEMARG/ SMGR1,SMGR2,SMGR3,SMGR4,SMGR5,SMGR6,DUMFP,
     +  SMGI1,SMGI2,SMGI3,SMGI4,SMGI5,SMGI6,SMGI7,SMGI8,
     +  SMGI9,SMGI10,DUMINT,SMGL1,SMGL2,SMGL3,DUMLOG
C
C SEMCFG contains installation configuration parameters that may be
C changed at run-time
C
      INTEGER CBSIZE,CBNUM,NDPDS,NLUTS,LUTLEN,LUTMAX,LUTSZE
C
      COMMON /SEMCFG/ CBSIZE,CBNUM,NDPDS,NLUTS,LUTLEN,LUTMAX,LUTSZE
C
C SEMPDB provides a display partition descriptor buffer
C
      REAL DPMIN,DPMAX,DPLEF,DPRIG,DPBOT,DPTOP,DPMA,DPMB,DPMA2,DPMB2
C
      INTEGER DPTYP,DPFRA,DPFRA2,DPTLX,DPTLY,DPSIZ,DPSI2,DPIMO,DPSRC
      INTEGER DPDEV,DPNUM,DPLUT,DPREST(NDPPAD)
C
      COMMON /SEMPDB/ DPMIN,DPMAX,DPLEF,DPRIG,DPBOT,DPTOP,DPMA,DPMB,
     +  DPMA2,DPMB2,DPTYP,DPFRA,DPFRA2,DPTLX,DPTLY,DPSIZ,DPSI2,DPIMO,
     +  DPSRC,DPDEV,DPNUM,DPLUT,DPREST
C
C SEMLDB contains the information pertaining to look-up tables
C
      INTEGER LUTMOD(LUTNUM)
      COMMON /SEMLDB/ LUTMOD
C
C SEMGDB contains all of the data required for the operation of the
C FSXXXX frame-store graphics routines
C
      REAL FSXSCA,FSYSCA,FSXOFF,FSYOFF,FSXMIN,FSXMAX,FSYMIN,FSYMAX
      REAL FSBLEF,FSBRIG,FSBBOT,FSBTOP,FSXPAN,FSYPAN,FSIOFF
C
      INTEGER FSDEV,FSFRA,FSFRA2,FSLUT,FSPAR,FSPTYP,FSI1,FSI2
      INTEGER FSMMOD,FSMSIZ
C
      COMMON /SEMGDB/ FSXSCA,FSYSCA,FSXOFF,FSYOFF,FSXMIN,FSXMAX,
     +  FSYMIN,FSYMAX,FSBLEF,FSBRIG,FSBBOT,FSBTOP,FSXPAN,FSYPAN,FSIOFF,
     +  FSDEV,FSFRA,FSFRA2,FSLUT,FSPAR,FSPTYP,FSI1,FSI2,FSMMOD,FSMSIZ
C
C SEMIOB contains text buffer for centralised I/O and any other
C        CHARACTER variables that need to be in COMMON
C
      CHARACTER*(RECLEN) RECORD,TRPREC,ERRREC
      CHARACTER*68 TERSTR
      CHARACTER*78 IDMESS
      CHARACTER*(LNWORK) WORKNM
      CHARACTER*255 IONAME
C
      COMMON /SEMIOB/ RECORD,TERSTR,TRPREC,ERRREC,IDMESS,WORKNM,IONAME
C
C SEMIOD contains rest of data for centralised I/O
C
      REAL    TERASP
      INTEGER TERWID,TERLEN,TERCNT
      INTEGER TERPLN,TERLBN,TERPBN,TERQBN
      LOGICAL TERCR,TERLF,TERXCR,TERXLF,TERPRO,TERWRA
      LOGICAL SOUFLG(6),SERFLG(6),TERQUI,LSERF,LIOVLD
      LOGICAL SOUCON,SOUDIA,SOULOG,SOUMON,SOUCOM,SOUINP
      LOGICAL SERCON,SERDIA,SERLOG,SERMON,SERCOM,SERINP
C
      COMMON /SEMIOD/ TERASP,TERWID,TERLEN,TERCNT,TERPLN,TERLBN,TERQBN,
     + TERPBN,TERCR,TERLF,TERXCR,TERXLF,TERPRO,TERWRA,SOUFLG,TERQUI,
     + LSERF,LIOVLD,SERFLG
C
      EQUIVALENCE (SOUCON,SOUFLG(1)),(SOUDIA,SOUFLG(2))
      EQUIVALENCE (SOULOG,SOUFLG(3)),(SOUMON,SOUFLG(4))
      EQUIVALENCE (SOUCOM,SOUFLG(5)),(SOUINP,SOUFLG(6))
      EQUIVALENCE (SERCON,SERFLG(1)),(SERDIA,SERFLG(2))
      EQUIVALENCE (SERLOG,SERFLG(3)),(SERMON,SERFLG(4))
      EQUIVALENCE (SERCOM,SERFLG(5)),(SERINP,SERFLG(6))
C
C SEMEVE contains flags for event utility routines
C
      INTEGER KSTATE,BSTATE,PSTATE,KBSTEP
      LOGICAL LEVENT
      COMMON /SEMEVE/ KSTATE,BSTATE,PSTATE,KBSTEP,LEVENT
C
C SEMKB1 contains information about keyboard buffer
C
      INTEGER KBUFN,KBUFP
      COMMON /SEMKB1/ KBUFN,KBUFP
C
C SEMKB2 contains the actual keyboard buffer array
C
      CHARACTER*(KBUFL) KBUFF(KBUFM)
      COMMON /SEMKB2/ KBUFF
C
C Declare external type conversion functions
C Removed, this was not good practice (LDM)
C
C     INTEGER SHORTS
C     INTEGER*4 LONGS
C     EXTERNAL SHORT,LONG
C
C Copyright (C) 1986-1996 Synoptics Ltd
C

